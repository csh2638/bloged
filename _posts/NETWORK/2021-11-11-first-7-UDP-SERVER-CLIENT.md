---
layout: post
title: "[WINSOCK] 7. UDP 서버 - 클라이언트"
categories: NETWORK
tags: [NETWORK, WINSOCK]
---

## 1. UDP 서버-클라이언트 구조

### 1. UDP 프로토콜 개요

TCP와 UDP의 공통점

1. 포트 번호를 이용해 주소를 지정한다. 두 응용프로그램이 TCP나 UDP를 이용해 통신하려면 반드시 포트번호를 결정해야 한다.
2. 데이터 오류를 체크한다. TCP와 UDP는 IP의 패킷 전송 기능을 기반으로 동작한다. 전송 중 여러 원인으로 오류가 발생할 수 있는데, IP는 프로토콜 동작에 필수적인 IP 헤더에 대해서만 오류를 체크하고 데이터는 체크하지 않는다.


|TCP|vs|UDP|
|------|---|---|
|연결형 프로토콜(연결 설정 후 통신가능)||비연결형 프로토콜(연결 설정 없이 통신가능)|
|신뢰성 있는 데이터 전송(데이터를 재전송함)||신뢰성 없는 데이터 전송(데이터를 재전송하지 않음)|
|일대일 통신||일대일 통신, 일대다 통신|
|데이터 경계 구분 안함, 바이트 스트림||데이터의 경계 구분, 데이터그램|


1. 연결 설정을 하지 않으므르 connect()함수 불필요하다.
2. 프로토콜 수준에서 신뢰성 있는 데이터 전송을 보장하지 않으므로, 필요하다면 응용 프로그램 수준에서 신뢰서 있는 데이터 전송 기능을 구현해야 한다.
3. 간단한 소켓 함수 호출 절차만 따르면 다자 간 통신을 쉽게 구현할 수 있다.
4. TCP와 달리 응용 프로그램이 데이터 경계 구분을 위한 작업을 별도로 할 필요가 없다.

### 2. UDP 서버-클라이언트 동작 원리

UDP서버는 TCP서버와 달리 멀티스레드 등의 프로그래밍 기법을 사용하지 않고도 한 소켓으로 여러 클라이언트를 처리할 수 있다.

(a) 서버 실행

서버는 소켓을 생성하고 클라이언트가 데이터를 보내기를 기다린다. 이 때 서버가 사용하는 소켓은 특정 포트번호와 결합되어있어서 이 포트 번호로 도착한 데이터만 수신할 수 있다.

(b) 클라이언트 #1 데이터 통신

첫 번째 클라이언트는 연결 설정 없이 서버와 데이터를 곧바로 주고받는다.

(c) 클라이언트 #1 #2 데이터 통신

두 번째 클라이언트도 연결 서버와 데이터를 곧바로 주고받는다. TCP서버와 달리 UDP서버는 소켓을 한 개만 사용한다는 점에 주의하자.

(d) 클라이언트 #1 #n 데이터 통신

UDP 서버-클라이언트가 통신하는 일반적인 상황이다. 'UDP 클라이언트 #n'처럼 한 클라이언트가 소켓을 두 개 이상 사용해 서버와 통신할 수도 있다.


### UDP에 대한 오해



















































































































































































































































































































































































































